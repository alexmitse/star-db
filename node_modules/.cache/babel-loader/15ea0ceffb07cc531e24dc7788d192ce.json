{"ast":null,"code":"import _slicedToArray from\"/home/amitsevich/STAR-DB/star-db/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable import/no-extraneous-dependencies */import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import queryString from'query-string';import'./search.scss';import SwapiService from'../../services/swapi-service';import SearchList from'../search-list';export default function Search(){var swapiService=new SwapiService();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),display=_useState4[0],setDisplay=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),value=_useState6[0],setValue=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),propTerm=_useState8[0],setPropTerm=_useState8[1];var location=useLocation();var parsedQuery=queryString.parse(location.search);var onTermChange=function onTermChange(event){if(event.target.value===''){setDisplay(false);}else{setDisplay(true);setValue(event.target.value);}};var onSubmit=function onSubmit(event){setTimeout(function(){swapiService.getElement(value,parsedQuery.page===undefined?'1':parsedQuery.page).then(function(_ref){var _ref2=_slicedToArray(_ref,1),listFromServer=_ref2[0];setList(listFromServer);setPropTerm(value);});},2000);event.preventDefault();};useEffect(function(){setList(undefined);},[display]);return React.createElement(\"div\",{className:\"container-search\"},React.createElement(\"form\",{onSubmit:onSubmit,className:\"container-search\"},React.createElement(\"input\",{type:\"text\",onInput:onTermChange,className:\"search-input\"}),React.createElement(\"input\",{type:\"submit\",value:\"\",className:\"search-submit\"})),list&&display&&React.createElement(SearchList,{list:list,display:display,setDisplay:setDisplay,propTerm:propTerm}));}","map":{"version":3,"sources":["/home/amitsevich/STAR-DB/star-db/src/components/search/search.jsx"],"names":["React","useState","useEffect","useLocation","queryString","SwapiService","SearchList","Search","swapiService","list","setList","display","setDisplay","value","setValue","propTerm","setPropTerm","location","parsedQuery","parse","search","onTermChange","event","target","onSubmit","setTimeout","getElement","page","undefined","then","listFromServer","preventDefault"],"mappings":"uJAAA,sDACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,WAAP,KAAwB,cAAxB,CACA,MAAO,eAAP,CACA,MAAOC,CAAAA,YAAP,KAAyB,8BAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,gBAAvB,CAEA,cAAe,SAASC,CAAAA,MAAT,EAAkB,CAC/B,GAAMC,CAAAA,YAAY,CAAG,GAAIH,CAAAA,YAAJ,EAArB,CAD+B,cAEPJ,QAAQ,CAAC,IAAD,CAFD,wCAExBQ,IAFwB,eAElBC,OAFkB,8BAGDT,QAAQ,CAAC,IAAD,CAHP,yCAGxBU,OAHwB,eAGfC,UAHe,8BAILX,QAAQ,CAAC,IAAD,CAJH,yCAIxBY,KAJwB,eAIjBC,QAJiB,8BAKCb,QAAQ,CAAC,EAAD,CALT,yCAKxBc,QALwB,eAKdC,WALc,eAM/B,GAAMC,CAAAA,QAAQ,CAAGd,WAAW,EAA5B,CACA,GAAMe,CAAAA,WAAW,CAAGd,WAAW,CAACe,KAAZ,CAAkBF,QAAQ,CAACG,MAA3B,CAApB,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC9B,GAAIA,KAAK,CAACC,MAAN,CAAaV,KAAb,GAAuB,EAA3B,CAA+B,CAC7BD,UAAU,CAAC,KAAD,CAAV,CACD,CAFD,IAEO,CACLA,UAAU,CAAC,IAAD,CAAV,CACAE,QAAQ,CAACQ,KAAK,CAACC,MAAN,CAAaV,KAAd,CAAR,CACD,CACF,CAPD,CAQA,GAAMW,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACF,KAAD,CAAW,CAC1BG,UAAU,CAAC,UAAM,CACfjB,YAAY,CACTkB,UADH,CAEIb,KAFJ,CAGIK,WAAW,CAACS,IAAZ,GAAqBC,SAArB,CAAiC,GAAjC,CAAuCV,WAAW,CAACS,IAHvD,EAKGE,IALH,CAKQ,cAAsB,kCAApBC,cAAoB,UAC1BpB,OAAO,CAACoB,cAAD,CAAP,CACAd,WAAW,CAACH,KAAD,CAAX,CACD,CARH,EASD,CAVS,CAUP,IAVO,CAAV,CAWAS,KAAK,CAACS,cAAN,GACD,CAbD,CAeA7B,SAAS,CAAC,UAAM,CACdQ,OAAO,CAACkB,SAAD,CAAP,CACD,CAFQ,CAEN,CAACjB,OAAD,CAFM,CAAT,CAIA,MACE,4BAAK,SAAS,CAAC,kBAAf,EACE,4BAAM,QAAQ,CAAEa,QAAhB,CAA0B,SAAS,CAAC,kBAApC,EACE,6BAAO,IAAI,CAAC,MAAZ,CAAmB,OAAO,CAAEH,YAA5B,CAA0C,SAAS,CAAC,cAApD,EADF,CAEE,6BAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,EAA3B,CAA8B,SAAS,CAAC,eAAxC,EAFF,CADF,CAKGZ,IAAI,EAAIE,OAAR,EACC,oBAAC,UAAD,EACE,IAAI,CAAEF,IADR,CAEE,OAAO,CAAEE,OAFX,CAGE,UAAU,CAAEC,UAHd,CAIE,QAAQ,CAAEG,QAJZ,EANJ,CADF,CAgBD","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nimport React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport queryString from 'query-string';\nimport './search.scss';\nimport SwapiService from '../../services/swapi-service';\nimport SearchList from '../search-list';\n\nexport default function Search() {\n  const swapiService = new SwapiService();\n  const [list, setList] = useState(null);\n  const [display, setDisplay] = useState(true);\n  const [value, setValue] = useState(null);\n  const [propTerm, setPropTerm] = useState('');\n  const location = useLocation();\n  const parsedQuery = queryString.parse(location.search);\n\n  const onTermChange = (event) => {\n    if (event.target.value === '') {\n      setDisplay(false);\n    } else {\n      setDisplay(true);\n      setValue(event.target.value);\n    }\n  };\n  const onSubmit = (event) => {\n    setTimeout(() => {\n      swapiService\n        .getElement(\n          value,\n          parsedQuery.page === undefined ? '1' : parsedQuery.page,\n        )\n        .then(([listFromServer]) => {\n          setList(listFromServer);\n          setPropTerm(value);\n        });\n    }, 2000);\n    event.preventDefault();\n  };\n\n  useEffect(() => {\n    setList(undefined);\n  }, [display]);\n\n  return (\n    <div className=\"container-search\">\n      <form onSubmit={onSubmit} className=\"container-search\">\n        <input type=\"text\" onInput={onTermChange} className=\"search-input\" />\n        <input type=\"submit\" value=\"\" className=\"search-submit\" />\n      </form>\n      {list && display && (\n        <SearchList\n          list={list}\n          display={display}\n          setDisplay={setDisplay}\n          propTerm={propTerm}\n        />\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}