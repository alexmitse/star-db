{"ast":null,"code":"import _slicedToArray from\"/home/amitsevich/STAR-DB/star-db/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable import/no-extraneous-dependencies */import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import ItemList from'../item-list';import Pagination from'../pagination';import Spinner from'../spinner';import'./people-page-list.css';import SwapiService from'../../services/swapi-service';import QueryWork from'../query-work/query-work';export default function PeolpePageList(){var swapiService=new SwapiService();function useQuery(){return new URLSearchParams(useLocation().search);}var query=useQuery();var page=query.get('page');var _useState=useState(null),_useState2=_slicedToArray(_useState,2),peopleCount=_useState2[0],setPeopleCount=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),peopleList=_useState4[0],setPeopleList=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentElement=_useState6[0],setCurrentElement=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,1),filter=_useState8[0];var _useState9=useState(10),_useState10=_slicedToArray(_useState9,1),sizeList=_useState10[0];var data=[{films:{type:'checkbox',dataList:[\"films_1\",\"films_2\",\"films_3\",\"films_4\"]}},{gender:{type:'list',dataList:['male','female','a']}},{rotationPeriod:{type:'number',dataList:['0','5']}}];useEffect(function(){swapiService.getAllPeople(\"\".concat(+page>9||// change 9 on variable\n+page<1&&!(currentElement===+page)||page===null?1:page,\" \"),filter).then(function(_ref){var _ref2=_slicedToArray(_ref,2),peopleListFromServer=_ref2[0],peopleCountFromServer=_ref2[1];setPeopleList(peopleListFromServer);setPeopleCount(peopleCountFromServer);});},[]);var onChangeCurrentElement=function onChangeCurrentElement(element){if(!(element>9||element<1||currentElement===element)){swapiService.getAllPeople(\"\".concat(element),filter).then(function(_ref3){var _ref4=_slicedToArray(_ref3,1),peopleListFromServer=_ref4[0];setPeopleList(peopleListFromServer);setCurrentElement(element);});}};if(!peopleList){return React.createElement(Spinner,null);}return React.createElement(\"div\",{className:\"people-page-list\"},React.createElement(\"div\",{className:\"people-page\"},React.createElement(ItemList,{list:peopleList,lable:\"people\"}),React.createElement(Pagination,{totalCount:peopleCount,currentPage:page===':page'?currentElement:page,setCurrentPage:onChangeCurrentElement,name:\"people\",size:sizeList})),React.createElement(\"div\",{className:\"people-page-filter\"},React.createElement(QueryWork,{data:data})));}","map":{"version":3,"sources":["/home/amitsevich/STAR-DB/star-db/src/components/people-page-list/people-page-list.jsx"],"names":["React","useState","useEffect","useLocation","ItemList","Pagination","Spinner","SwapiService","QueryWork","PeolpePageList","swapiService","useQuery","URLSearchParams","search","query","page","get","peopleCount","setPeopleCount","peopleList","setPeopleList","currentElement","setCurrentElement","filter","sizeList","data","films","type","dataList","gender","rotationPeriod","getAllPeople","then","peopleListFromServer","peopleCountFromServer","onChangeCurrentElement","element"],"mappings":"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","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nimport React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport ItemList from '../item-list';\nimport Pagination from '../pagination';\nimport Spinner from '../spinner';\nimport './people-page-list.css';\nimport SwapiService from '../../services/swapi-service';\nimport QueryWork from '../query-work/query-work';\n\nexport default function PeolpePageList() {\n  const swapiService = new SwapiService();\n  function useQuery() {\n    return new URLSearchParams(useLocation().search);\n  }\n  const query = useQuery();\n  const page = query.get('page');\n  const [peopleCount, setPeopleCount] = useState(null);\n  const [peopleList, setPeopleList] = useState(null);\n  const [currentElement, setCurrentElement] = useState(1);\n  const [filter] = useState(false);\n  const [sizeList] = useState(10);\n\n  const data = [\n    {\n      films: {\n        type: 'checkbox',\n        dataList: [`films_1`, `films_2`, `films_3`, `films_4`],\n      },\n    },\n    { gender: { type: 'list', dataList: ['male', 'female', 'a'] } },\n    { rotationPeriod: { type: 'number', dataList: ['0', '5'] } },\n  ];\n\n  useEffect(() => {\n    swapiService\n      .getAllPeople(\n        `${\n          +page > 9 || // change 9 on variable\n          (+page < 1 && !(currentElement === +page)) ||\n          page === null\n            ? 1\n            : page\n        } `,\n        filter,\n      )\n      .then(([peopleListFromServer, peopleCountFromServer]) => {\n        setPeopleList(peopleListFromServer);\n        setPeopleCount(peopleCountFromServer);\n      });\n  }, []);\n\n  const onChangeCurrentElement = (element) => {\n    if (!(element > 9 || element < 1 || currentElement === element)) {\n      swapiService\n        .getAllPeople(`${element}`, filter)\n        .then(([peopleListFromServer]) => {\n          setPeopleList(peopleListFromServer);\n          setCurrentElement(element);\n        });\n    }\n  };\n\n  if (!peopleList) {\n    return <Spinner />;\n  }\n\n  return (\n    <div className=\"people-page-list\">\n      <div className=\"people-page\">\n        <ItemList list={peopleList} lable=\"people\" />\n        <Pagination\n          totalCount={peopleCount}\n          currentPage={page === ':page' ? currentElement : page}\n          setCurrentPage={onChangeCurrentElement}\n          name=\"people\"\n          size={sizeList}\n        />\n      </div>\n      <div className=\"people-page-filter\">\n        <QueryWork data={data} />\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}