{"ast":null,"code":"import _slicedToArray from \"/home/amitsevich/STAR-DB/star-db/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/amitsevich/STAR-DB/star-db/src/components/starships-page-list/starships-page-list.jsx\";\n\n/* eslint-disable import/no-extraneous-dependencies */\nimport React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport ItemList from '../item-list';\nimport Pagination from '../pagination';\nimport Spinner from '../spinner';\nimport './starships-page-list.css';\nimport SwapiService from '../../services/swapi-service';\nexport default function StarshipsPageList() {\n  const swapiService = new SwapiService();\n\n  function useQuery() {\n    return new URLSearchParams(useLocation().search);\n  }\n\n  const query = useQuery();\n  const page = query.get('page');\n\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        starshipsCount = _useState2[0],\n        setStarshipsCount = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        starshipsList = _useState4[0],\n        setStarshipsList = _useState4[1];\n\n  const _useState5 = useState(1),\n        _useState6 = _slicedToArray(_useState5, 2),\n        currentElement = _useState6[0],\n        setCurrentElement = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 1),\n        filter = _useState8[0];\n\n  const _useState9 = useState(10),\n        _useState10 = _slicedToArray(_useState9, 1),\n        sizeList = _useState10[0];\n\n  useEffect(() => {\n    swapiService.getAllStarships(`${+page > 9 || // change 9 on variable\n    +page < 1 && !(currentElement === +page) || page === null ? 1 : page} `, filter).then(([starshipsListFromServer, starshipsCountFromServer]) => {\n      setStarshipsCount(starshipsCountFromServer);\n      setStarshipsList(starshipsListFromServer);\n    });\n  }, []);\n\n  const onChangeCurrentElement = element => {\n    if (!(element > 9 || element < 1 || currentElement === element)) {\n      swapiService.getAllStarships(`${element}`, null).then(([starshipsListFromServer]) => {\n        setStarshipsList(starshipsListFromServer);\n        setCurrentElement(element);\n      });\n    }\n  };\n\n  if (!starshipsList) {\n    return React.createElement(Spinner, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"starships-page\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(ItemList, {\n    list: starshipsList,\n    lable: \"starships\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }), React.createElement(Pagination, {\n    totalCount: starshipsCount,\n    currentPage: page !== ':page' ? page : currentElement,\n    setCurrentPage: onChangeCurrentElement,\n    name: \"starships\",\n    size: sizeList,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }));\n}","map":{"version":3,"sources":["/home/amitsevich/STAR-DB/star-db/src/components/starships-page-list/starships-page-list.jsx"],"names":["React","useState","useEffect","useLocation","ItemList","Pagination","Spinner","SwapiService","StarshipsPageList","swapiService","useQuery","URLSearchParams","search","query","page","get","starshipsCount","setStarshipsCount","starshipsList","setStarshipsList","currentElement","setCurrentElement","filter","sizeList","getAllStarships","then","starshipsListFromServer","starshipsCountFromServer","onChangeCurrentElement","element"],"mappings":"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","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nimport React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport ItemList from '../item-list';\nimport Pagination from '../pagination';\nimport Spinner from '../spinner';\nimport './starships-page-list.css';\nimport SwapiService from '../../services/swapi-service';\n\nexport default function StarshipsPageList() {\n  const swapiService = new SwapiService();\n  function useQuery() {\n    return new URLSearchParams(useLocation().search);\n  }\n  const query = useQuery();\n  const page = query.get('page');\n\n  const [starshipsCount, setStarshipsCount] = useState(null);\n  const [starshipsList, setStarshipsList] = useState(null);\n  const [currentElement, setCurrentElement] = useState(1);\n  const [filter] = useState(false);\n  const [sizeList] = useState(10);\n\n  useEffect(() => {\n    swapiService\n      .getAllStarships(\n        `${\n          +page > 9 || // change 9 on variable\n          (+page < 1 && !(currentElement === +page)) ||\n          page === null\n            ? 1\n            : page\n        } `,\n        filter,\n      )\n      .then(([starshipsListFromServer, starshipsCountFromServer]) => {\n        setStarshipsCount(starshipsCountFromServer);\n        setStarshipsList(starshipsListFromServer);\n      });\n  }, []);\n\n  const onChangeCurrentElement = (element) => {\n    if (!(element > 9 || element < 1 || currentElement === element)) {\n      swapiService\n        .getAllStarships(`${element}`, null)\n        .then(([starshipsListFromServer]) => {\n          setStarshipsList(starshipsListFromServer);\n          setCurrentElement(element);\n        });\n    }\n  };\n\n  if (!starshipsList) {\n    return <Spinner />;\n  }\n  return (\n    <div className=\"starships-page\">\n      <ItemList list={starshipsList} lable=\"starships\" />\n      <Pagination\n        totalCount={starshipsCount}\n        currentPage={page !== ':page' ? page : currentElement}\n        setCurrentPage={onChangeCurrentElement}\n        name=\"starships\"\n        size={sizeList}\n      />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}