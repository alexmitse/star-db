{"ast":null,"code":"import _toConsumableArray from\"/home/amitsevich/STAR-DB/star-db/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/amitsevich/STAR-DB/star-db/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable react/prop-types */import React,{useState,useEffect}from'react';import'./filter.css';export default function Filter(_ref){var data=_ref.data,onSetObj=_ref.onSetObj,query=_ref.query;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),objFromServer=_useState2[0],setObjFromServer=_useState2[1];var newObj={};function mySort(arr,char){var copyArr=arr;var count=copyArr.indexOf(char);var _ref2=[copyArr[count],copyArr[0]];copyArr[0]=_ref2[0];copyArr[count]=_ref2[1];return copyArr;}useEffect(function(){data.forEach(function(item){var objNextProperty=item[Object.keys(item)];switch(objNextProperty.type){case'checkbox':newObj[objNextProperty.type]={};newObj[objNextProperty.type][_toConsumableArray(Object.keys(item))]={};objNextProperty.dataList.map(function(el){newObj[objNextProperty.type][_toConsumableArray(Object.keys(item))][el]=false;return newObj[objNextProperty.type][_toConsumableArray(Object.keys(item))][el];});break;case'list':newObj[objNextProperty.type]={};newObj[objNextProperty.type][_toConsumableArray(Object.keys(item))]=_toConsumableArray(objNextProperty.dataList);break;case'number':newObj[objNextProperty.type]={};newObj[objNextProperty.type][_toConsumableArray(Object.keys(item))]={from:objNextProperty.dataList[0],to:objNextProperty.dataList[1]};break;default:break;}});if(query){Object.keys(query).forEach(function(elem){data.forEach(function(item){var objNextProperty=item[Object.keys(item)];var _objNextProperty$data=_slicedToArray(objNextProperty.dataList,2),from=_objNextProperty$data[0],to=_objNextProperty$data[1];switch(objNextProperty.type){case'checkbox':objNextProperty.dataList.map(function(el){if(Object.keys(newObj[objNextProperty.type])[0]===elem){if(Array.isArray(query[elem])){query[elem].forEach(function(qElem){if(el===qElem){newObj[objNextProperty.type][_toConsumableArray(Object.keys(item))][qElem]=true;}});}if(!Array.isArray(query[elem])){if(el===query[elem]){newObj[objNextProperty.type][_toConsumableArray(Object.keys(item))][query[elem]]=true;}}}return newObj[objNextProperty.type][_toConsumableArray(Object.keys(item))][el];});break;case'list':if(Object.keys(newObj[objNextProperty.type])[0]===elem){if(objNextProperty.dataList.includes(query[elem])){newObj[objNextProperty.type][_toConsumableArray(Object.keys(item))]=mySort(objNextProperty.dataList,query[elem]);}}break;case'number':if(elem.includes('from')&&+from<+query[elem]&&+query[elem]<+to){newObj[objNextProperty.type][_toConsumableArray(Object.keys(item))].from=query[elem];}if(elem.includes('from')&&!(+from<+query[elem]&&+query[elem]<+to)){newObj[objNextProperty.type][_toConsumableArray(Object.keys(item))].from=from;}if(elem.includes('to')&&+from<+query[elem]&&+query[elem]<+to){newObj[objNextProperty.type][_toConsumableArray(Object.keys(item))].to=query[elem];}if(elem.includes('to')&&!(+from<+query[elem]&&+query[elem]<+to)){newObj[objNextProperty.type][_toConsumableArray(Object.keys(item))].to=to;}break;default:break;}});});}setObjFromServer(newObj);},[]);var obj={};function handlerForm(e){var options=e.target.querySelectorAll('option');for(var i=0;i<options.length;i+=1){if(options[i].selected){Object.keys(objFromServer).forEach(function(item){if(item==='list'){Object.keys(objFromServer[item]).forEach(function(el){objFromServer[item][el]=[e.target.value];});}});}}if(e.target.checked){if(objFromServer[e.target.type][e.target.value.split('_')[0]]){objFromServer[e.target.type][e.target.value.split('_')[0]][e.target.value]=e.target.checked;}}if(!e.target.checked){if(e.target.type==='checkbox')if(objFromServer[e.target.type][e.target.value.split('_')[0]]){objFromServer[e.target.type][e.target.value.split('_')[0]][e.target.value]=false;}}if(+e.target.value>=+e.target.min&&+e.target.value<=+e.target.max&&e.target.value!==''){if(e.target.name==='from'){Object.keys(objFromServer).forEach(function(item){if(item==='number'){Object.keys(objFromServer[item]).forEach(function(el){obj.from=e.target.value;objFromServer[item][el]=obj;});}});}if(e.target.name==='to'){Object.keys(objFromServer).forEach(function(item){if(item==='number'){Object.keys(objFromServer[item]).forEach(function(el){obj.to=e.target.value;objFromServer[item][el]=obj;});}});}}onSetObj(objFromServer);setObjFromServer(objFromServer);}var renderFilter=function renderFilter(datas){return Object.keys(datas).map(function(item){switch(item){case'checkbox':return React.createElement(\"label\",{key:\"checkbox\",htmlFor:\"checkbox\",className:\"wraper-filter-items\"},Object.keys(datas[item]).map(function(el){return el;}),Object.keys(datas[item]).map(function(el){return Object.entries(datas[item][el]).map(function(keyValue){if(keyValue[1])return React.createElement(\"label\",{key:keyValue[0],htmlFor:keyValue[0],className:\"filter-item\"},React.createElement(\"input\",{type:item,value:keyValue[0],defaultChecked:true,id:el,className:\"input-checkbox\"}),keyValue[0]);return React.createElement(\"label\",{key:keyValue[0],htmlFor:keyValue[0],className:\"filter-item\"},React.createElement(\"input\",{type:item,value:keyValue[0],id:el,className:\"input-checkbox\"}),keyValue[0]);});}));case'list':return React.createElement(\"label\",{key:\"list\",htmlFor:\"list\",className:\"wraper-filter-items\"},Object.keys(datas[item]).map(function(el){return el;}),React.createElement(\"select\",{className:\"select-item\"},Object.keys(datas[item]).map(function(el){return Object.values(datas[item][el]).map(function(keyValue){return React.createElement(\"option\",{key:keyValue,label:keyValue,value:keyValue,id:el,className:\"input-item\"});});})));case'number':return React.createElement(\"label\",{key:\"number\",htmlFor:\"number\",className:\"wraper-filter-items\"},Object.keys(datas[item]).map(function(el){return el;}),Object.keys(datas[item]).map(function(el){var minmax=[];Object.entries(datas[item][el]).map(function(keyValue){return minmax.push(keyValue[1]);});return Object.entries(datas[item][el]).map(function(keyValue){return React.createElement(\"label\",{key:keyValue[0],htmlFor:keyValue[0],className:\"filter-item\"},keyValue[0],React.createElement(\"input\",{defaultValue:keyValue[1],name:keyValue[0],type:item,min:minmax[0],max:minmax[1],id:el,className:\"input-item\"}));});}));default:return new Error('u should be loch');}});};return React.createElement(\"div\",{className:\"container-filter\"},React.createElement(\"form\",{onChange:handlerForm,className:\"item-list form-filter\"},renderFilter(objFromServer)));}","map":{"version":3,"sources":["/home/amitsevich/STAR-DB/star-db/src/components/filter/filter.jsx"],"names":["React","useState","useEffect","Filter","data","onSetObj","query","objFromServer","setObjFromServer","newObj","mySort","arr","char","copyArr","count","indexOf","forEach","item","objNextProperty","Object","keys","type","dataList","map","el","from","to","elem","Array","isArray","qElem","includes","obj","handlerForm","e","options","target","querySelectorAll","i","length","selected","value","checked","split","min","max","name","renderFilter","datas","entries","keyValue","values","minmax","push","Error"],"mappings":"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","sourcesContent":["/* eslint-disable react/prop-types */\nimport React, { useState, useEffect } from 'react';\nimport './filter.css';\n\nexport default function Filter({ data, onSetObj, query }) {\n  const [objFromServer, setObjFromServer] = useState({});\n  const newObj = {};\n  function mySort(arr, char) {\n    const copyArr = arr;\n    const count = copyArr.indexOf(char);\n    [copyArr[0], copyArr[count]] = [copyArr[count], copyArr[0]];\n    return copyArr;\n  }\n  useEffect(() => {\n    data.forEach((item) => {\n      const objNextProperty = item[Object.keys(item)];\n      switch (objNextProperty.type) {\n        case 'checkbox':\n          newObj[objNextProperty.type] = {};\n          newObj[objNextProperty.type][[...Object.keys(item)]] = {};\n          objNextProperty.dataList.map((el) => {\n            newObj[objNextProperty.type][[...Object.keys(item)]][el] = false;\n            return newObj[objNextProperty.type][[...Object.keys(item)]][el];\n          });\n          break;\n        case 'list':\n          newObj[objNextProperty.type] = {};\n          newObj[objNextProperty.type][[...Object.keys(item)]] = [\n            ...objNextProperty.dataList,\n          ];\n          break;\n        case 'number':\n          newObj[objNextProperty.type] = {};\n          newObj[objNextProperty.type][[...Object.keys(item)]] = {\n            from: objNextProperty.dataList[0],\n            to: objNextProperty.dataList[1],\n          };\n          break;\n        default:\n          break;\n      }\n    });\n    if (query) {\n      Object.keys(query).forEach((elem) => {\n        data.forEach((item) => {\n          const objNextProperty = item[Object.keys(item)];\n          const [from, to] = objNextProperty.dataList;\n          switch (objNextProperty.type) {\n            case 'checkbox':\n              objNextProperty.dataList.map((el) => {\n                if (Object.keys(newObj[objNextProperty.type])[0] === elem) {\n                  if (Array.isArray(query[elem])) {\n                    query[elem].forEach((qElem) => {\n                      if (el === qElem) {\n                        newObj[objNextProperty.type][[...Object.keys(item)]][\n                          qElem\n                        ] = true;\n                      }\n                    });\n                  }\n                  if (!Array.isArray(query[elem])) {\n                    if (el === query[elem]) {\n                      newObj[objNextProperty.type][[...Object.keys(item)]][\n                        query[elem]\n                      ] = true;\n                    }\n                  }\n                }\n                return newObj[objNextProperty.type][[...Object.keys(item)]][el];\n              });\n              break;\n            case 'list':\n              if (Object.keys(newObj[objNextProperty.type])[0] === elem) {\n                if (objNextProperty.dataList.includes(query[elem])) {\n                  newObj[objNextProperty.type][[...Object.keys(item)]] = mySort(\n                    objNextProperty.dataList,\n                    query[elem],\n                  );\n                }\n              }\n              break;\n            case 'number':\n              if (\n                elem.includes('from') &&\n                +from < +query[elem] &&\n                +query[elem] < +to\n              ) {\n                newObj[objNextProperty.type][[...Object.keys(item)]].from =\n                  query[elem];\n              }\n              if (\n                elem.includes('from') &&\n                !(+from < +query[elem] && +query[elem] < +to)\n              ) {\n                newObj[objNextProperty.type][\n                  [...Object.keys(item)]\n                ].from = from;\n              }\n              if (\n                elem.includes('to') &&\n                +from < +query[elem] &&\n                +query[elem] < +to\n              ) {\n                newObj[objNextProperty.type][[...Object.keys(item)]].to =\n                  query[elem];\n              }\n              if (\n                elem.includes('to') &&\n                !(+from < +query[elem] && +query[elem] < +to)\n              ) {\n                newObj[objNextProperty.type][[...Object.keys(item)]].to = to;\n              }\n              break;\n            default:\n              break;\n          }\n        });\n      });\n    }\n    setObjFromServer(newObj);\n  }, []);\n\n  const obj = {};\n  function handlerForm(e) {\n    const options = e.target.querySelectorAll('option');\n    for (let i = 0; i < options.length; i += 1) {\n      if (options[i].selected) {\n        Object.keys(objFromServer).forEach((item) => {\n          if (item === 'list') {\n            Object.keys(objFromServer[item]).forEach((el) => {\n              objFromServer[item][el] = [e.target.value];\n            });\n          }\n        });\n      }\n    }\n    if (e.target.checked) {\n      if (objFromServer[e.target.type][e.target.value.split('_')[0]]) {\n        objFromServer[e.target.type][e.target.value.split('_')[0]][\n          e.target.value\n        ] = e.target.checked;\n      }\n    }\n    if (!e.target.checked) {\n      if (e.target.type === 'checkbox')\n        if (objFromServer[e.target.type][e.target.value.split('_')[0]]) {\n          objFromServer[e.target.type][e.target.value.split('_')[0]][\n            e.target.value\n          ] = false;\n        }\n    }\n    if (\n      +e.target.value >= +e.target.min &&\n      +e.target.value <= +e.target.max &&\n      e.target.value !== ''\n    ) {\n      if (e.target.name === 'from') {\n        Object.keys(objFromServer).forEach((item) => {\n          if (item === 'number') {\n            Object.keys(objFromServer[item]).forEach((el) => {\n              obj.from = e.target.value;\n              objFromServer[item][el] = obj;\n            });\n          }\n        });\n      }\n      if (e.target.name === 'to') {\n        Object.keys(objFromServer).forEach((item) => {\n          if (item === 'number') {\n            Object.keys(objFromServer[item]).forEach((el) => {\n              obj.to = e.target.value;\n              objFromServer[item][el] = obj;\n            });\n          }\n        });\n      }\n    }\n    onSetObj(objFromServer);\n    setObjFromServer(objFromServer);\n  }\n\n  const renderFilter = (datas) => {\n    return Object.keys(datas).map((item) => {\n      switch (item) {\n        case 'checkbox':\n          return (\n            <label\n              key=\"checkbox\"\n              htmlFor=\"checkbox\"\n              className=\"wraper-filter-items\"\n            >\n              {Object.keys(datas[item]).map((el) => el)}\n              {Object.keys(datas[item]).map((el) =>\n                Object.entries(datas[item][el]).map((keyValue) => {\n                  if (keyValue[1])\n                    return (\n                      <label\n                        key={keyValue[0]}\n                        htmlFor={keyValue[0]}\n                        className=\"filter-item\"\n                      >\n                        <input\n                          type={item}\n                          value={keyValue[0]}\n                          defaultChecked\n                          id={el}\n                          className=\"input-checkbox\"\n                        />\n                        {keyValue[0]}\n                      </label>\n                    );\n                  return (\n                    <label\n                      key={keyValue[0]}\n                      htmlFor={keyValue[0]}\n                      className=\"filter-item\"\n                    >\n                      <input\n                        type={item}\n                        value={keyValue[0]}\n                        id={el}\n                        className=\"input-checkbox\"\n                      />\n                      {keyValue[0]}\n                    </label>\n                  );\n                }),\n              )}\n            </label>\n          );\n        case 'list':\n          return (\n            <label key=\"list\" htmlFor=\"list\" className=\"wraper-filter-items\">\n              {Object.keys(datas[item]).map((el) => el)}\n              <select className=\"select-item\">\n                {Object.keys(datas[item]).map((el) =>\n                  Object.values(datas[item][el]).map((keyValue) => {\n                    return (\n                      <option\n                        key={keyValue}\n                        label={keyValue}\n                        value={keyValue}\n                        id={el}\n                        className=\"input-item\"\n                      />\n                    );\n                  }),\n                )}\n              </select>\n            </label>\n          );\n        case 'number':\n          return (\n            <label\n              key=\"number\"\n              htmlFor=\"number\"\n              className=\"wraper-filter-items\"\n            >\n              {Object.keys(datas[item]).map((el) => el)}\n              {Object.keys(datas[item]).map((el) => {\n                const minmax = [];\n                Object.entries(datas[item][el]).map((keyValue) =>\n                  minmax.push(keyValue[1]),\n                );\n                return Object.entries(datas[item][el]).map((keyValue) => {\n                  return (\n                    <label\n                      key={keyValue[0]}\n                      htmlFor={keyValue[0]}\n                      className=\"filter-item\"\n                    >\n                      {keyValue[0]}\n                      <input\n                        defaultValue={keyValue[1]}\n                        name={keyValue[0]}\n                        type={item}\n                        min={minmax[0]}\n                        max={minmax[1]}\n                        id={el}\n                        className=\"input-item\"\n                      />\n                    </label>\n                  );\n                });\n              })}\n            </label>\n          );\n        default:\n          return new Error('u should be loch');\n      }\n    });\n  };\n  return (\n    <div className=\"container-filter\">\n      <form onChange={handlerForm} className=\"item-list form-filter\">\n        {renderFilter(objFromServer)}\n      </form>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}