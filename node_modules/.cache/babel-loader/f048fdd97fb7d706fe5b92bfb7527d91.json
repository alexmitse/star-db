{"ast":null,"code":"import _slicedToArray from\"/home/amitsevich/STAR-DB/star-db/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable import/no-extraneous-dependencies */import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import ItemList from'../item-list';import Pagination from'../pagination';import Spinner from'../spinner';import'./starships-page-list.css';import SwapiService from'../../services/swapi-service';export default function StarshipsPageList(){var swapiService=new SwapiService();function useQuery(){return new URLSearchParams(useLocation().search);}var query=useQuery();var page=query.get('page');var _useState=useState(null),_useState2=_slicedToArray(_useState,2),starshipsCount=_useState2[0],setStarshipsCount=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),starshipsList=_useState4[0],setStarshipsList=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentElement=_useState6[0],setCurrentElement=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,1),filter=_useState8[0];var _useState9=useState(10),_useState10=_slicedToArray(_useState9,1),sizeList=_useState10[0];useEffect(function(){swapiService.getAllStarships(\"\".concat(+page>9||// change 9 on variable\n+page<1&&!(currentElement===+page)||page===null?1:page,\" \"),filter).then(function(_ref){var _ref2=_slicedToArray(_ref,2),starshipsListFromServer=_ref2[0],starshipsCountFromServer=_ref2[1];setStarshipsCount(starshipsCountFromServer);setStarshipsList(starshipsListFromServer);});},[]);var onChangeCurrentElement=function onChangeCurrentElement(element){if(!(element>9||element<1||currentElement===element)){swapiService.getAllStarships(\"\".concat(element),null).then(function(_ref3){var _ref4=_slicedToArray(_ref3,1),starshipsListFromServer=_ref4[0];setStarshipsList(starshipsListFromServer);setCurrentElement(element);});}};if(!starshipsList){return React.createElement(Spinner,null);}return React.createElement(\"div\",{className:\"starships-page\"},React.createElement(ItemList,{list:starshipsList,lable:\"starships\"}),React.createElement(Pagination,{totalCount:starshipsCount,currentPage:page!==':page'?page:currentElement,setCurrentPage:onChangeCurrentElement,name:\"starships\",size:sizeList}));}","map":{"version":3,"sources":["/home/amitsevich/STAR-DB/star-db/src/components/starships-page-list/starships-page-list.jsx"],"names":["React","useState","useEffect","useLocation","ItemList","Pagination","Spinner","SwapiService","StarshipsPageList","swapiService","useQuery","URLSearchParams","search","query","page","get","starshipsCount","setStarshipsCount","starshipsList","setStarshipsList","currentElement","setCurrentElement","filter","sizeList","getAllStarships","then","starshipsListFromServer","starshipsCountFromServer","onChangeCurrentElement","element"],"mappings":"uJAAA,sDACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,QAAP,KAAqB,cAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,eAAvB,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CACA,MAAO,2BAAP,CACA,MAAOC,CAAAA,YAAP,KAAyB,8BAAzB,CAEA,cAAe,SAASC,CAAAA,iBAAT,EAA6B,CAC1C,GAAMC,CAAAA,YAAY,CAAG,GAAIF,CAAAA,YAAJ,EAArB,CACA,QAASG,CAAAA,QAAT,EAAoB,CAClB,MAAO,IAAIC,CAAAA,eAAJ,CAAoBR,WAAW,GAAGS,MAAlC,CAAP,CACD,CACD,GAAMC,CAAAA,KAAK,CAAGH,QAAQ,EAAtB,CACA,GAAMI,CAAAA,IAAI,CAAGD,KAAK,CAACE,GAAN,CAAU,MAAV,CAAb,CAN0C,cAQEd,QAAQ,CAAC,IAAD,CARV,wCAQnCe,cARmC,eAQnBC,iBARmB,8BASAhB,QAAQ,CAAC,IAAD,CATR,yCASnCiB,aATmC,eASpBC,gBAToB,8BAUElB,QAAQ,CAAC,CAAD,CAVV,yCAUnCmB,cAVmC,eAUnBC,iBAVmB,8BAWzBpB,QAAQ,CAAC,KAAD,CAXiB,yCAWnCqB,MAXmC,8BAYvBrB,QAAQ,CAAC,EAAD,CAZe,0CAYnCsB,QAZmC,gBAc1CrB,SAAS,CAAC,UAAM,CACdO,YAAY,CACTe,eADH,WAGM,CAACV,IAAD,CAAQ,CAAR,EAAa;AACZ,CAACA,IAAD,CAAQ,CAAR,EAAa,EAAEM,cAAc,GAAK,CAACN,IAAtB,CADd,EAEAA,IAAI,GAAK,IAFT,CAGI,CAHJ,CAIIA,IAPV,MASIQ,MATJ,EAWGG,IAXH,CAWQ,cAAyD,kCAAvDC,uBAAuD,UAA9BC,wBAA8B,UAC7DV,iBAAiB,CAACU,wBAAD,CAAjB,CACAR,gBAAgB,CAACO,uBAAD,CAAhB,CACD,CAdH,EAeD,CAhBQ,CAgBN,EAhBM,CAAT,CAkBA,GAAME,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,CAACC,OAAD,CAAa,CAC1C,GAAI,EAAEA,OAAO,CAAG,CAAV,EAAeA,OAAO,CAAG,CAAzB,EAA8BT,cAAc,GAAKS,OAAnD,CAAJ,CAAiE,CAC/DpB,YAAY,CACTe,eADH,WACsBK,OADtB,EACiC,IADjC,EAEGJ,IAFH,CAEQ,eAA+B,mCAA7BC,uBAA6B,UACnCP,gBAAgB,CAACO,uBAAD,CAAhB,CACAL,iBAAiB,CAACQ,OAAD,CAAjB,CACD,CALH,EAMD,CACF,CATD,CAWA,GAAI,CAACX,aAAL,CAAoB,CAClB,MAAO,qBAAC,OAAD,MAAP,CACD,CACD,MACE,4BAAK,SAAS,CAAC,gBAAf,EACE,oBAAC,QAAD,EAAU,IAAI,CAAEA,aAAhB,CAA+B,KAAK,CAAC,WAArC,EADF,CAEE,oBAAC,UAAD,EACE,UAAU,CAAEF,cADd,CAEE,WAAW,CAAEF,IAAI,GAAK,OAAT,CAAmBA,IAAnB,CAA0BM,cAFzC,CAGE,cAAc,CAAEQ,sBAHlB,CAIE,IAAI,CAAC,WAJP,CAKE,IAAI,CAAEL,QALR,EAFF,CADF,CAYD","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nimport React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport ItemList from '../item-list';\nimport Pagination from '../pagination';\nimport Spinner from '../spinner';\nimport './starships-page-list.css';\nimport SwapiService from '../../services/swapi-service';\n\nexport default function StarshipsPageList() {\n  const swapiService = new SwapiService();\n  function useQuery() {\n    return new URLSearchParams(useLocation().search);\n  }\n  const query = useQuery();\n  const page = query.get('page');\n\n  const [starshipsCount, setStarshipsCount] = useState(null);\n  const [starshipsList, setStarshipsList] = useState(null);\n  const [currentElement, setCurrentElement] = useState(1);\n  const [filter] = useState(false);\n  const [sizeList] = useState(10);\n\n  useEffect(() => {\n    swapiService\n      .getAllStarships(\n        `${\n          +page > 9 || // change 9 on variable\n          (+page < 1 && !(currentElement === +page)) ||\n          page === null\n            ? 1\n            : page\n        } `,\n        filter,\n      )\n      .then(([starshipsListFromServer, starshipsCountFromServer]) => {\n        setStarshipsCount(starshipsCountFromServer);\n        setStarshipsList(starshipsListFromServer);\n      });\n  }, []);\n\n  const onChangeCurrentElement = (element) => {\n    if (!(element > 9 || element < 1 || currentElement === element)) {\n      swapiService\n        .getAllStarships(`${element}`, null)\n        .then(([starshipsListFromServer]) => {\n          setStarshipsList(starshipsListFromServer);\n          setCurrentElement(element);\n        });\n    }\n  };\n\n  if (!starshipsList) {\n    return <Spinner />;\n  }\n  return (\n    <div className=\"starships-page\">\n      <ItemList list={starshipsList} lable=\"starships\" />\n      <Pagination\n        totalCount={starshipsCount}\n        currentPage={page !== ':page' ? page : currentElement}\n        setCurrentPage={onChangeCurrentElement}\n        name=\"starships\"\n        size={sizeList}\n      />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}